install.packages("gdata")
library(gdata)
setwd("C:/Users/Tuukka/Desktop/IODS-final")
df = read.xls ("gov_data_org.xlsx", sheet = 1, header = TRUE)
df = read.xls ("gov_data_org.xlsx", sheet = data, header = TRUE)
df = read.xls ("gov_data_org.xlsx", sheet = "data", header = TRUE)
?read.xls
?read.csv
setwd("C:/Users/Tuukka/Desktop/IODS-final")
df = read.xls("gov_data_org.csv", sep=";", dec=".", header = TRUE)
setwd("C:/Users/Tuukka/Desktop/IODS-final")
getwd()
df = read.csv("gov_data_org.csv", sep=";", dec=".", header = TRUE)
summary(full_data)
#Needed packages
#Reading original csv-file
setwd("C:/Users/Tuukka/Desktop/IODS-final")
full_data = read.csv("gov_data_org.csv", sep=";", dec=".", header = TRUE)
summary(full_data)
library(dplyr)
final_data[ , apply(final_data, 2, function(x) !any(is.na(x)))]
data_narmv <- full_data[ , apply(full_data, 2, function(x) !any(is.na(x)))]
summary(narmv)
summary(data_narmv)
?apply
View(data_narmv)
View(data_narmv)
write.csv(data_narmv, file="lol.csv")
?mean
data_narmv <- mutate(data_narmv, trust = (data_narmv$rq17b_mean + data_narmv$rq17d_mean + data_narmv$rq17e_mean) / 3)
data_narmv <- dplyr::select(data_narmv, -rq17d_mean )
?select
data_narmv <- dplyr::select(data_narmv, -starts_with("rq17"))
data_narmv <- mutate(data_narmv, corruption = (data_narmv$rq18a_mean + data_narmv$rq18b_mean + data_narmv$rq18d_mean + data_narmv$rq18e_mean) / 4)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq18"))
data_narmv$freedom <- rowMeans(subset(data_narmv, select = c(rq34a_mean, rq34b_mean, rq34c_mean, rq34d_mean, rq34e_mean, rq34f_mean, rq34g_mean, rq34h_mean)), na.rm = TRUE)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq34"))
data_narmv$bribe <- rowMeans(subset(data_narmv, select = c(rq36a_mean, rq36b_mean, rq36c_mean, rq36d_mean, rq36e_mean)), na.rm = TRUE)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq36"))
#Tuukka Kangas
#tuukka.kangas@helsinki.fi
#26th February, 2017
#This script is for the data wrangling for the final assignment in IODS course.
#The data is described better in the index file.
#The used dataset is Trust and Quality of Local Governance in European cities
#Source http://data.europa.eu/euodp/en/data/dataset/jrc-coin-regio-trust-and-quality-of-local-governance-in-european-cities-2011-2014
#Needed packages
library(dplyr)
#Reading original csv-file
setwd("C:/Users/Tuukka/Desktop/IODS-final")
full_data = read.csv("gov_data_org.csv", sep=";", dec=".", header = TRUE)
####################
#Reducing varibles
#In 56 varibles there is 11 variables that contains at least one observation that have missing value.
#Because there will remain 45 variables - that is more than enough for my purposes - I removed all variables that have at least one missing value
data_narmv <- full_data[ , apply(full_data, 2, function(x) !any(is.na(x)))]
#Because the amount of variables is still quite big, I reduced the number of variables
#For the reducing I created some sum variables
#Trust, combines three variables that covers trust in different authorities
data_narmv <- mutate(data_narmv, trust = (data_narmv$rq17b_mean + data_narmv$rq17d_mean + data_narmv$rq17e_mean) / 3)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq17"))
#Corruption, four variables that covers corruption in different authorities
data_narmv <- mutate(data_narmv, corruption = (data_narmv$rq18a_mean + data_narmv$rq18b_mean + data_narmv$rq18d_mean + data_narmv$rq18e_mean) / 4)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq18"))
#Freedom, 12 variables that covers citicens freedom
data_narmv$freedom <- rowMeans(subset(data_narmv, select = c(rq38c_mean, rq38d_mean, rq38e_mean, rq38f_mean, rq34a_mean, rq34b_mean, rq34c_mean, rq34d_mean, rq34e_mean, rq34f_mean, rq34g_mean, rq34h_mean)), na.rm = TRUE)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq34"))
data_narmv <- dplyr::select(data_narmv, -starts_with("rq38"))
#Bribe, five variables that covers giving bribe to the authorities
data_narmv$bribe <- rowMeans(subset(data_narmv, select = c(rq36a_mean, rq36b_mean, rq36c_mean, rq36d_mean, rq36e_mean)), na.rm = TRUE)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq36"))
data_narmv <- mutate(data_narmv, houdem = (data_narmv$rq1b_1_mean + (1- data_narmv_mean)) / 2)
data_narmv <- mutate(data_narmv, houdem = (data_narmv$rq1b_1_mean + (1- data_narmv$rq1b_3_mean)) / 2)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq1b"))
colnames(data_narmv)[which(names(data_narmv) == "rq1c_mean")] <- "faircourt"
data_narmv <- dplyr::select(data_narmv, -starts_with("rq7"))
data_narmv <- mutate(data_narmv, busfine = (data_narmv$rq13a_mean + data_narmv$rq13b_mean) / 2)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq13"))
colnames(data_narmv)[which(names(data_narmv) == "rq14_mean")] <- "safe"
data_narmv <- dplyr::select(data_narmv, -starts_with("rq7"))
data_narmv <- dplyr::select(data_narmv, -starts_with("rq11"))
data_narmv <- mutate(data_narmv, govopen = (data_narmv$rq15d_mean + data_narmv$rq15b_mean) / 2)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq15"))
colnames(data_narmv)[which(names(data_narmv) == "rq30_mean")] <- "break"
colnames(data_narmv)[which(names(data_narmv) == "rq29_mean")] <- "workdis"
data_narmv$lawful <- rowMeans(subset(data_narmv, select = c(rq37a_mean, rq37b_mean, rq37c_mean, rq37d_mean)), na.rm = TRUE)
data_narmv <- dplyr::select(data_narmv, -starts_with("rq37"))
